<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>School Schedule Printer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 min-h-screen flex flex-col items-center justify-center">
  <div class="max-w-xl w-full p-6 bg-white rounded-lg shadow-lg">
    <div class="flex justify-between items-center mb-4">
      <h1 id="title" class="text-2xl font-bold">School Schedule Printer</h1>
      <select id="lang" class="border rounded px-2 py-1">
        <option value="en">EN</option>
        <option value="ua">UA</option>
      </select>
    </div>
    <p id="desc" class="mb-6 text-gray-700">Upload your schedule JSON file to generate a printable timetable.</p>
    <div id="dropzone" class="border-2 border-dashed border-blue-400 rounded-lg p-8 text-center cursor-pointer bg-blue-50 hover:bg-blue-100 transition mb-4">
      <span id="dropLabel">Drag & Drop or Select JSON file</span>
      <input type="file" id="fileInput" accept="application/json" class="hidden" />
    </div>
    <div id="fileInfo" class="mb-4 text-green-600 font-medium"></div>
    <div class="flex flex-col gap-2">
      <a href="static-schedule.html" target="_blank" class="text-blue-600 underline">Example Output</a>
      <a href="7B.json" target="_blank" class="text-blue-600 underline">Example Input</a>
    </div>
  </div>
  <script>
    const translations = {
      en: {
        title: "School Schedule Printer",
        desc: "Upload your schedule JSON file to generate a printable timetable.",
        dropLabel: "Drag & Drop or Select JSON file",
        fileLoaded: "File loaded:",
        exampleOutput: "Example Output",
        exampleInput: "Example Input"
      },
      ua: {
        title: "Друк розкладу уроків",
        desc: "Завантажте файл розкладу у форматі JSON для створення роздруківки.",
        dropLabel: "Перетягніть або виберіть файл JSON",
        fileLoaded: "Файл завантажено:",
        exampleOutput: "Приклад результату",
        exampleInput: "Приклад вхідного файлу"
      }
    };
    const langSelect = document.getElementById('lang');
    function setLang(lang) {
      document.getElementById('title').textContent = translations[lang].title;
      document.getElementById('desc').textContent = translations[lang].desc;
      document.getElementById('dropLabel').textContent = translations[lang].dropLabel;
      document.querySelector('a[href="static-schedule.html"]').textContent = translations[lang].exampleOutput;
      document.querySelector('a[href="7B.json"]').textContent = translations[lang].exampleInput;
    }
    langSelect.addEventListener('change', e => setLang(e.target.value));
    setLang(langSelect.value);

    const dropzone = document.getElementById('dropzone');
    const fileInput = document.getElementById('fileInput');
    const fileInfo = document.getElementById('fileInfo');
    dropzone.addEventListener('click', () => fileInput.click());
    dropzone.addEventListener('dragover', e => {
      e.preventDefault();
      dropzone.classList.add('bg-blue-100');
    });
    dropzone.addEventListener('dragleave', e => {
      e.preventDefault();
      dropzone.classList.remove('bg-blue-100');
    });
    dropzone.addEventListener('drop', e => {
      e.preventDefault();
      dropzone.classList.remove('bg-blue-100');
      handleFile(e.dataTransfer.files[0]);
    });
    fileInput.addEventListener('change', e => {
      if (e.target.files[0]) handleFile(e.target.files[0]);
    });
    function handleFile(file) {
      if (file && file.type === "application/json") {
        fileInfo.textContent = `${translations[langSelect.value].fileLoaded} ${file.name}`;
      } else {
        fileInfo.textContent = "";
        alert("Please select a valid JSON file.");
      }
    }
  </script>
</body>
</html>
